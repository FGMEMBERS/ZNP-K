%%
%%
%%

%% JavaProp.
% Max pitch
JP1 = [
%v/(nD)	v/ΩR	Ct	Cp	Cs	Pc	η	η*	stalled	v	n	Power	Thrust	Torque
%[-]	[-]	[-]	[-]	[-]	[-]	[%]	[%]	[%]	[m/s]	[1/min]	[kW]	[kN]	[Nm]
0.000	0.000	0.102330	0.052363	0.000000	999999.000000	0.01	0.00	38.00 	0.00	1200	410.631	10.531	3267.70
0.050	0.016	0.103651	0.052877	0.090015	1077.207177	9.80	17.43	38.00 	3.81	1200	414.667	10.667	3299.82
0.100	0.032	0.102438	0.052405	0.180354	133.448355	19.55	31.81	33.00 	7.62	1200	410.964	10.542	3270.35
0.150	0.048	0.100465	0.052399	0.270537	39.535553	28.76	43.70	27.00 	11.43	1200	410.915	10.339	3269.96
0.200	0.064	0.044287	0.021025	0.432994	6.692517	42.13	67.31	27.00	15.24	1200	164.881	4.558	1312.08
0.250	0.080	0.094741	0.051964	0.451648	8.468803	45.58	61.65	11.00	19.05	1200	407.505	9.750	3242.82
0.300	0.095	0.090964	0.051564	0.542816	4.863180	52.92	68.38	0.00	22.86	1200	404.366	9.361	3217.84
0.350	0.111	0.085054	0.050444	0.636073	2.995997	59.01	74.26	0.00	26.67	1200	395.582	8.753	3147.94
0.400	0.127	0.077439	0.048130	0.733798	1.915036	64.36	79.39	0.00	30.48	1200	377.440	7.970	3003.57
0.450	0.143	0.068097	0.044555	0.838367	1.245074	68.78	83.91	0.00	34.29	1200	349.400	7.008	2780.44
0.500	0.159	0.058622	0.040424	0.949824	0.823501	72.51	87.68	0.00	38.10	1200	317.004	6.033	2522.64
0.550	0.175	0.048829	0.035618	1.071588	0.545164	75.40	90.84	0.00	41.91	1200	279.322	5.025	2222.78
0.600	0.191	0.038577	0.030026	1.209628	0.353984	77.09	93.51	0.00	45.72	1200	235.466	3.970	1873.78
0.650	0.207	0.027911	0.023619	1.374869	0.219008	76.81	95.77	0.00	49.53	1200	185.221	2.872	1473.94
0.660	0.210	0.025732	0.022239	1.412930	0.196981	76.37	96.18	0.00	50.29	1200	174.400	2.648	1387.83
0.670	0.213	0.023538	0.020827	1.453287	0.176332	75.72	96.57	0.00	51.05	1200	163.323	2.422	1299.68
0.680	0.216	0.021327	0.019381	1.496353	0.156959	74.83	96.96	0.00	51.82	1200	151.986	2.195	1209.47
0.690	0.220	0.019103	0.017904	1.542623	0.138784	73.62	97.33	0.00	52.58	1200	140.403	1.966	1117.29
0.700	0.223	0.016864	0.016395	1.592780	0.121719	72.00	97.69	0.00	53.34	1200	128.571	1.736	1023.13
0.710	0.226	0.014613	0.014856	1.647696	0.105699	69.84	98.03	0.00	54.10	1200	116.503	1.504	927.10
0.720	0.229	0.012342	0.013282	1.708758	0.090615	66.91	98.37	0.00	54.86	1200	104.157	1.270	828.86
0.730	0.232	0.010052	0.011671	1.777862	0.076400	62.87	98.70	0.00	55.63	1200	91.528	1.035	728.36
0.740	0.236	0.007770	0.010044	1.857175	0.063116	57.25	99.01	0.00	56.39	1200	78.763	0.800	626.78
0.750	0.239	0.005456	0.008367	1.952283	0.050507	48.90	99.32	0.00	57.15	1200	65.618	0.562	522.17
0.760	0.242	0.003140	0.006664	2.070452	0.038658	35.81	99.62	0.00	57.91	1200	52.260	0.323	415.87
0.770	0.245	0.000769	0.004894	2.231312	0.027297	12.11	99.91	0.00	58.67	1200	38.378	0.079	305.40
0.780	0.248	-0.001593	0.003104	2.475774	0.016656	0.00	99.99	0.00	59.44	1200	24.342	-0.164	193.70
0.790	0.251	-0.003964	0.001278	2.994280	0.006603	0.00	99.99	0.00	60.20	1200	10.025	-0.408	79.78
0.800	0.255	-0.006370	-0.000602	3.525365	-0.002993	0.30	55.60	0.00	60.96	1200	-4.719	-0.656	-37.55

       ];

%% JavaProp.
% Max pitch -5
JP2 = [
%v/(nD)	v/ΩR	Ct	Cp	Cs	Pc	η	η*	stalled	v	n	Power	Thrust	Torque
%[-]	[-]	[-]	[-]	[-]	[-]	[%]	[%]	[%]	[m/s]	[1/min]	[kW]	[kN]	[Nm]
0.000	0.000	0.090284	0.032820	0.000000	999999.000000	0.01	0.00	27.00 	0.00	1200	257.378	9.292	2048.15
0.050	0.016	0.084715	0.032932	0.098957	670.876305	12.86	19.13	22.00 	3.81	1200	258.252	8.718	2055.10
0.100	0.032	0.080629	0.032743	0.198142	83.379555	24.62	35.09	22.00 	7.62	1200	256.773	8.298	2043.34
0.150	0.048	0.042018	0.018055	0.334790	13.622527	34.91	58.52	22.00	11.43	1200	141.587	4.324	1126.71
0.200	0.064	0.070151	0.031335	0.399783	9.974182	44.78	59.37	11.00	15.24	1200	245.730	7.220	1955.46
0.250	0.080	0.063340	0.029910	0.504402	4.874568	52.94	68.58	0.00	19.05	1200	234.556	6.519	1866.54
0.300	0.095	0.055016	0.027705	0.614622	2.613007	59.57	76.41	0.00	22.86	1200	217.267	5.662	1728.96
0.350	0.111	0.046003	0.024873	0.732694	1.477283	64.73	82.88	0.00	26.67	1200	195.055	4.734	1552.20
0.400	0.127	0.036657	0.021463	0.862429	0.853973	68.32	88.14	0.00	30.48	1200	168.312	3.773	1339.38
0.450	0.143	0.026899	0.017446	1.011282	0.487532	69.38	92.41	0.00	34.29	1200	136.814	2.768	1088.73
0.500	0.159	0.016599	0.012772	1.195965	0.260188	64.98	95.89	0.00	38.10	1200	100.158	1.708	797.04
0.510	0.162	0.014484	0.011750	1.240412	0.225554	62.87	96.51	0.00	38.86	1200	92.141	1.491	733.23
0.520	0.166	0.012310	0.010677	1.289185	0.193362	59.95	97.10	0.00	39.62	1200	83.728	1.267	666.29
0.530	0.169	0.010175	0.009600	1.342214	0.164204	56.17	97.67	0.00	40.39	1200	75.284	1.047	599.09
0.540	0.172	0.008006	0.008484	1.401765	0.137199	50.96	98.21	0.00	41.15	1200	66.531	0.824	529.44
0.550	0.175	0.005788	0.007319	1.470543	0.112015	43.50	98.74	0.00	41.91	1200	57.392	0.596	456.71
0.560	0.178	0.003570	0.006129	1.551337	0.088876	32.62	99.24	0.00	42.67	1200	48.066	0.367	382.50
0.570	0.181	0.001325	0.004900	1.651307	0.067383	15.41	99.72	0.00	43.43	1200	38.430	0.136	305.81
0.580	0.185	-0.000928	0.003643	1.782957	0.047544	0.00	99.99	0.00	44.20	1200	28.567	-0.096	227.33
0.590	0.188	-0.003209	0.002344	1.980883	0.029064	0.00	99.99	0.00	44.96	1200	18.382	-0.330	146.28
0.600	0.191	-0.005496	0.001016	2.381025	0.011979	0.00	99.99	0.00	45.72	1200	7.968	-0.566	63.41
0.610	0.194	-0.007842	-0.000373	2.957600	-0.004187	0.42	56.86	0.00	46.48	1200	-2.927	-0.807	-23.29
       ];

%% JavaProp.
% Max pitch -10
JP3 = [
%v/(nD)	v/ΩR	Ct	Cp	Cs	Pc	η	η*	stalled	v	n	Power	Thrust	Torque
%[-]	[-]	[-]	[-]	[-]	[-]	[%]	[%]	[%]	[m/s]	[1/min]	[kW]	[kN]	[Nm]
0.000	0.000	0.070344	0.017930	0.000000	999999.000000	0.01	0.00	22.00 	0.00	1200	140.610	7.239	1118.94
0.050	0.016	0.029517	0.012028	0.121041	245.025171	12.27	30.31	22.00 	3.81	1200	94.322	3.038	750.59
0.100	0.032	0.019261	0.009865	0.251874	25.120034	19.53	58.16	16.00	7.62	1200	77.359	1.982	615.60
0.150	0.048	0.041122	0.015801	0.343839	11.921880	39.04	58.90	5.00	11.43	1200	123.911	4.232	986.05
0.200	0.064	0.034260	0.014525	0.466234	4.623600	47.17	71.53	0.00	15.24	1200	113.910	3.526	906.46
0.250	0.080	0.026163	0.012729	0.598384	2.074533	51.38	81.78	0.00	19.05	1200	99.823	2.693	794.37
0.300	0.095	0.017513	0.010438	0.747127	0.984487	50.33	89.77	0.00	22.86	1200	81.859	1.802	651.41
0.310	0.099	0.015490	0.009844	0.781134	0.841463	48.78	91.24	0.00	23.62	1200	77.199	1.594	614.33
0.320	0.102	0.013532	0.009251	0.816412	0.718941	46.81	92.60	0.00	24.38	1200	72.549	1.393	577.33
0.330	0.105	0.011763	0.008704	0.852265	0.616730	44.60	93.79	0.00	25.15	1200	68.254	1.211	543.15
0.340	0.108	0.009921	0.008118	0.890416	0.525936	41.55	94.94	0.00	25.91	1200	63.659	1.021	506.58
0.350	0.111	0.007939	0.007463	0.932148	0.443254	37.23	96.08	0.00	26.67	1200	58.526	0.817	465.73
0.360	0.115	0.006073	0.006833	0.975833	0.372964	32.00	97.11	0.00	27.43	1200	53.588	0.625	426.44
0.370	0.118	0.004042	0.006125	1.025138	0.307915	24.42	98.14	0.00	28.19	1200	48.032	0.416	382.22
0.380	0.121	0.002011	0.005397	1.079823	0.250464	14.16	99.10	0.00	28.96	1200	42.324	0.207	336.80
0.390	0.124	-0.000013	0.004652	1.141681	0.199685	0.00	99.99	0.00	29.72	1200	36.478	-0.001	290.28
0.400	0.127	-0.002071	0.003873	1.214629	0.154114	0.00	99.99	0.00	30.48	1200	30.375	-0.213	241.71
0.410	0.131	-0.004175	0.003056	1.305469	0.112895	0.00	99.99	0.00	31.24	1200	23.962	-0.430	190.68
0.420	0.134	-0.006262	0.002223	1.425143	0.076409	0.00	99.99	0.00	32.00	1200	17.434	-0.644	138.73
0.430	0.137	-0.008423	0.001338	1.614982	0.042859	0.00	99.99	0.00	32.77	1200	10.494	-0.867	83.51
0.440	0.140	-0.010581	0.000431	2.072421	0.012896	0.00	99.99	0.00	33.53	1200	3.383	-1.089	26.92
0.450	0.143	-0.012760	-0.000507	2.052233	-0.014166	1.42	57.80	0.00	34.29	1200	-3.975	-1.313	-31.63
       ];


C_Thrust1 = [JP1(:,1) JP1(:,3)];
C_Thrust2 = [JP2(:,1) JP2(:,3)];
C_Thrust3 = [JP3(:,1) JP3(:,3)];

C_Power1 = [JP1(:,1) JP1(:,4)];
C_Power2 = [JP2(:,1) JP2(:,4)];
C_Power3 = [JP3(:,1) JP3(:,4)];

Efficiency1 = C_Thrust1(:,1) .* C_Thrust1(:,2) ./ C_Power1(:,2);
Efficiency2 = C_Thrust2(:,1) .* C_Thrust2(:,2) ./ C_Power2(:,2);
Efficiency3 = C_Thrust3(:,1) .* C_Thrust3(:,2) ./ C_Power3(:,2);

%% Thrust and Power v.s. advance ratio.

figure();
axis();
plot(C_Thrust1(:,1), C_Thrust1(:,2),\
     C_Power1(:,1), C_Power1(:,2),\
     C_Thrust2(:,1), C_Thrust2(:,2),\
     C_Power2(:,1), C_Power2(:,2),\
     C_Thrust3(:,1), C_Thrust3(:,2),\
     C_Power3(:,1), C_Power3(:,2));

%% Efficiency v.s. advance ratio.
figure();
axis([0 1 0 1]);
plot(C_Thrust1(:,1), Efficiency1,\
     C_Thrust2(:,1), Efficiency2,\
     C_Thrust3(:,1), Efficiency3);

Advance = 0:0.05:1.30;

C_Thrust = [Advance' \
            interp1(C_Thrust3(:,1),C_Thrust3(:,2), Advance, 'extrap')'\
            interp1(C_Thrust2(:,1),C_Thrust2(:,2), Advance, 'extrap')'\
            interp1(C_Thrust1(:,1),C_Thrust1(:,2), Advance, 'extrap')'];

C_Power = [Advance' \
            interp1(C_Power3(:,1),C_Power3(:,2), Advance, 0.01)'\
            interp1(C_Power2(:,1),C_Power2(:,2), Advance, 0.01)'\
            interp1(C_Power1(:,1),C_Power1(:,2), Advance, 0.01)'];

figure();
plot(Advance, C_Thrust(:,2), Advance, C_Power(:,2),\
     Advance, C_Thrust(:,3), Advance, C_Power(:,3),\
     Advance, C_Thrust(:,4), Advance, C_Power(:,4));
